<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="TechMine Posts on various topics" />
        <meta name="author" content="" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.techmine.io/" />
        <meta property="og:locale" content="en_US" />
        <meta property="og:site_name" content="TechMine" />
        <meta property="og:title" content="TechMine Blog" />
        <meta property="og:description" content="TechMine Posts on various topics" />
        <meta property="og:image" content="https://www.techmine.io/img/TechMine_Banner.png" />
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:site" content="@TechMineIO" />
        <meta name="twitter:creator" content="@TechMineIO" />
        <meta name="twitter:title" content="TechMine Blog" />
        <meta name="twitter:description" content="TechMine Posts on various topics" />
        <meta name="twitter:image" content="https://www.techmine.io/img/TechMine_Banner.png" />
        <title>TechMine Blog</title>
        <link rel="icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="apple-touch-icon" href="/img/TechMine.png" />
        <!-- Bootstrap icons-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css" rel="preload" as="style" onload='this.onload=null;this.rel="stylesheet"' />
        <!-- Google fonts-->
        <link rel="preconnect" href="https://fonts.gstatic.com" />
        <link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,wght@0,600;1,600&amp;display=swap" rel="preload" as="style" onload='this.onload=null;this.rel="stylesheet"' />
        <link href="https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,300;0,500;0,600;0,700;1,300;1,500;1,600;1,700&amp;display=swap" rel="preload" as="style" onload='this.onload=null;this.rel="stylesheet"' />
        <link href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,400;1,400&amp;display=swap" rel="preload" as="style" onload='this.onload=null;this.rel="stylesheet"' />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="/css/styles.min.css" rel="stylesheet" />
    </head>
    <body>
        <div id="content-wrap">
            <main class="flex-shrink-0">
                <!-- Navigation-->
                <nav class="navbar navbar-expand-lg navbar-light fixed-top shadow-sm" id="mainNav">
                    <div class="container px-5">
                        <a class="navbar-brand fw-bold" href="/#page-top">
                            <img src="/img/TechMineLogo_Color.svg" height="60" width="60" style="margin-top: -35px; margin-bottom: -35px" alt="TM" loading="lazy" />
                            <span style="font-size: 0">
                                <span style="font-size: 1.25rem">Tech</span>
                                <span style="font-size: 1.25rem; color: #2937f0">Mine</span>
                            </span>
                        </a>
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation" style="border: none; font-size: 32px; box-shadow: none"><i class="bi-list"></i></button>
                        <div class="collapse navbar-collapse" id="navbarResponsive">
                            <ul class="navbar-nav ms-auto me-4 my-3 my-lg-0">
                                <li class="nav-item"><a class="nav-link me-lg-3" href="/downloads">Downloads</a></li>
                                <li class="nav-item"><a class="nav-link me-lg-3" href="/pricing">Pricing</a></li>
                                <li class="nav-item"><a class="nav-link me-lg-3" href="/contact">Contact Us</a></li>
                                <li class="nav-item"><a class="nav-link me-lg-3" href="https://youtu.be/AuH_INmXBtE" target="_blank">Watch Demo</a></li>
                                <li class="nav-item"><a class="nav-link me-lg-3" href="https://app.techmine.io">Log In</a></li>
                            </ul>
                            <button class="btn btn-primary rounded-pill px-3 mb-2 mb-lg-0" data-bs-toggle="modal" data-bs-target="#feedbackModal">
                                <span class="d-flex align-items-center">
                                    <!--i.bi-chat-text-fill.me-2-->
                                    <span class="small">Sign Up</span>
                                </span>
                            </button>
                        </div>
                    </div>
                </nav>
                <!-- Page Content-->
                <section class="py-5">
                    <div class="container px-5 my-5">
                        <div class="row gx-5">
                            <div class="col-lg-3">
                                <div class="d-flex align-items-center mt-lg-5 mb-4">
                                    <div class="ms-3"><div class="fw-bold">Garrett Lenk</div></div>
                                </div>
                            </div>
                            <div class="col-lg-9">
                                <!-- Post content-->
                                <article>
                                    <!-- Post header-->
                                    <header class="mb-4">
                                        <!-- Post title-->
                                        <h1 class="fw-bolder mb-1">Why TechMine Uses F# Over Other Languages</h1>
                                        <!-- Post meta content-->
                                        <div class="text-muted fst-italic mb-2">November 11, 2022</div>
                                        <!-- Post categories-->
                                        <a class="badge bg-secondary text-decoration-none link-light" href="#!">F#</a>
                                    </header>
                                    <!-- Preview image figure-->
                                    <figure class="mb-4"><img class="img-fluid rounded" src="/assets/img/post/Why-FSharp/banner.png" alt="..." /></figure>
                                    <!-- Post content-->
                                    <section class="mb-5">
                                        <h2 class="fw-bolder mb-4 mt-5">Background</h2>
                                        <p class="text-muted fs-5 mb-4">
                                            TechMine lets you access and share your files instantly from anywhere. You can find out more about how it works
                                            <a href="https://www.techmine.io/">here.</a>
                                            TechMine is written almost entirely in F#, with only a few pieces written in C# and C++. On the server side, we use Saturn which provides a F# friendly way to write an ASP.NET Core server. ASP.NET Core is one of the most popular server frameworks out there, so we know we are getting performance, reliability, and security out of the box. On the browser, we use Fable which transpiles F# code to JavaScript. We chose Fable over other candidates such as Bolero due to reasons such as hot reload, size, performance, popularity, and history. Bolero and Fun.Blazor are intriguing projects that target webassembly and we think that they may be a viable candidate in the future. For mobile, we chose Fabulous because we were already familiar with Xamarin Forms. We use Fabulous V1 right now, but we may look into using Fabulous V2 with MAUI at a later date. For desktop, we created a Fabulous wrapper for Eto.Forms, so that we could write Elmish for all our
                                            targets. We chose Eto.Forms over other candidates such as Avalonia, due to our preference for native looking UIs. Eto.Forms is similar to Xamarin Forms, but it's primary target is desktop (WPF, GTK, MacUI). We will be releasing our wrapper library to Github in the coming weeks.
                                        </p>
                                        <h2 class="fw-bolder mb-4 mt-5">
                                            Why F#
                                            <img class="img-fluid rounded mb-4" src="/assets/img/post/Why-FSharp/FSharp_Logo.svg" alt="..." width="100" />
                                        </h2>
                                        <h3 class="font-alt mb-4 mt-5">Reusability</h3>
                                        <p class="text-muted fs-5 mb-4">
                                            One of the greatest aspects of F# is it's ability to not only target .NET, but also languages like JavaScript through Fable. This allows us to write one function or type in f# and have it work across all the platforms that we need. In addition to our core libraries, we can also share most of our UI code because we are using Elmish on all platforms. Elmish is a UI framework that uses the MVU architecture. MVU stands for model view update and organizes the different components in a logical way. The model is the type that represents what would be drawn in the view. The view is how that model gets drawn to the screen. Update is how the model will change when the user interacts with the view. We're able to share the model and how it updates across all platforms and only need to write views for each platform We write a view for the web, mobile, and desktop which makes sense because they have different preferred ways to interact with the UI.
                                        </p>
                                        <h3 class="font-alt mb-4 mt-5">Safety</h3>
                                        <p class="text-muted fs-5 mb-4">
                                            F# is focused on providing a safe experience out of the box with features such as immutability by default, option types, and records. Safety is important to providing consistency by reducing the amount of unexpected states and therefore creating less bugs. Immutability by default means we can't modify a variable after it has been assigned, so we don't have to worry if it has been changed somewhere later in the program. F# option types almost completely get rid of one of the most common errors, the NullReferenceException. It does this by representing a nullable object as either Some or None and encourages you to check its state before using it. Records ensure that you always initialize each field and once initialized you cannot change that field's value without creating a new record. This is useful for safety because if you add a field to a record, you must update every time you create that record which once again reduces
                                            NullReferenceExceptions. There are ways to circumvent these safety features, but having them by default treats developers to a more predictable experience. All of these features contribute to less bugs for the end user.
                                        </p>
                                        <h3 class="font-alt mb-4 mt-5">Quick feedback loop</h3>
                                        <p class="text-muted fs-5 mb-4">With hot reload, we are able to make and view changes in real time. F# also has quick compilation times which allow us to also test more often. F# is very concise and allows us to write any code we need to change faster. If you would like to test a single function, dotnet fsi lets you run snippets of code without running the whole project. With these components, we are able to iterate and design quicker.</p>
                                        <h3 class="font-alt mb-4 mt-5">Performance</h3>
                                        <p class="text-muted fs-5 mb-4">
                                            Most people don't associate performance with F#, but F# can actually be quite fast. F# runs on .NET, which has seen many performance increases over the years. Additionally, F# provides you with techniques to squeeze the most performance possible. Some of these techniques include inlining, mutability, structs, vectors, and unsafe memory operations. It's nice to be able to write code quickly and then go back and write code that runs quickly. Bartosz Sypytkowski wrote a great blog outlining how to write high performance F# which you can read
                                            <a href="https://bartoszsypytkowski.com/writing-high-performance-f-code/" target="_blank">here.</a>
                                            I also enjoyed the
                                            <a href="https://www.youtube.com/c/FastFSharp" target="_blank">Fast F#</a>
                                            series by Mathew Crews which demonstrates a variety of approaches to improving performance with F#.
                                        </p>
                                        <h3 class="font-alt mb-4 mt-5">Fun</h3>
                                        <p class="text-muted fs-5 mb-4">
                                            F# is just plain fun to write and gets rid of most of the headaches that other languages have. F# has less boilerplate than languages like C#, so we're able focus on writing our code instead of setting it up. F# is order dependent in it's compilation, which may seem like a downside at first, but you quickly realize that your code becomes more structured and therefore easier to read and understand. It also allows you to find and change code quicker than if you had to guess where a file may be. F# has so many productivity features such as pattern matching, type inference, computational expressions, and type providers. With all of this, it's no wonder why F# is ranked as one of the most loved languages on
                                            <a href="https://insights.stackoverflow.com/survey/2021#section-most-loved-dreaded-and-wanted-programming-scripting-and-markup-languages" target="_blank">StackOverflow</a>
                                            , beating out popular languages like Java, C#, and JavaScript.
                                        </p>
                                        <h3 class="font-alt mb-4 mt-5">Familiarity</h3>
                                        <p class="text-muted fs-5 mb-4">Coming from a C# background, F# made sense in a lot of ways. F# shares the same BCL that C# does and has its own amazing F# Core library. F# is also apart of the .NET ecosystem which means you can use the familiar dotnet cli, Nuget, and Visual Studio.</p>
                                        <h3 class="font-alt mb-4 mt-5">Community</h3>
                                        <p class="text-muted fs-5 mb-4">
                                            The F# community, although smaller than other communities, is one of the most friendly, helpful, and passionate communities I have had the pleasure of being a part of. I have already received invaluable feedback on TechMine from the community. The F# community is active, with questions being answered very quickly after being posted. There are so many great blogs about F#, but one of my favorite is
                                            <a href="https://sergeytihon.com/category/f-weekly/" target="_blank">F# Weekly.</a>
                                        </p>
                                        <br />
                                        <br />
                                        <br />
                                        <br />
                                        <br />
                                        <br />
                                        <h2 class="fw-bolder mb-4 mt-5">Why Not Other Languages?</h2>
                                        <p class="text-muted fs-5 mb-4">F# is not the only language we considered, but there is clear reason why we chose F#.</p>
                                        <h3 class="font-alt mb-4 mt-5">
                                            Why Not C#?
                                            <img class="img-fluid rounded mb-4" src="/assets/img/post/Why-FSharp/Csharp_Logo.png" alt="..." width="100" />
                                        </h3>
                                        <p class="text-muted fs-5 mb-4">I love C#, it's a great language. A lot of the things you can do in F#, you can also do in C#. C# is also more popular and is better supported by Microsoft. So why not C#? It came down to focus, F# has a clear focus of being functional first and safe while C# is just now tacking on these features. C# has limited pattern matching, limited type inference, and is mutable by default. C# generally needs more lines of code to do the same thing in F#. F# is still able to use libraries written in C#, although you need to be more careful about checking and converting nulls. The tradeoff of popularity for safety and conciseness is one that makes sense to us and is why we chose F# over C#.</p>
                                        <h3 class="font-alt mb-4 mt-5">
                                            Why Not TypeScript?
                                            <img class="img-fluid rounded mb-4" src="/assets/img/post/Why-FSharp/Typescript_logo.png" alt="..." width="100" />
                                        </h3>
                                        <p class="text-muted fs-5 mb-4">TypeScript is a language that is strongly typed and is transpiled to JavaScript. Sound familiar? F# is also a language that is strongly typed and can be transpiled to JavaScript via Fable. TypeScript is a great language, but it is clear that it loses some of it's benefits when not running in the browser. F# unlocks so much more when targeting .NET and provides additional features not present in TypeScript. .NET is generally faster than TypeScript due to it's better multithreading capabilities and the reasons I mentioned in the performance section.</p>
                                        <h3 class="font-alt mb-4 mt-5">
                                            Why Not Rust?
                                            <img class="img-fluid rounded mb-4" src="/assets/img/post/Why-FSharp/Rust_Logo.png" alt="..." width="100" />
                                        </h3>
                                        <p class="text-muted fs-5 mb-4">Rust shares a lot of aspects with F# such as immutability by default, discriminated unions, option types, pattern matching, and more. Rust is also more popular and known for it's performance and safety. So why not rust? We briefly explored using Rust and found that while it does provide features that we like, the slower compilation times and additional time considering ownership and lifetimes led to a slower feedback loop. Additionally, Rust's UI frameworks just don't seem there yet and we wanted to minimize the amount of duplicate code across the different platforms we support. We may come back to how we can integrate Rust in our performance critical pieces, but for now we plan to use the techniques described in the performance section to optimize the F# code. If we ever plan to migrate pieces to Rust, it may not be as difficult with Fable 4's support for Rust.</p>
                                        <h3 class="font-alt mb-4 mt-5">
                                            Why Not PHP?
                                            <img class="img-fluid rounded mb-4" src="/assets/img/post/Why-FSharp/PHP_Logo.png" alt="..." width="100" />
                                        </h3>
                                        <p class="text-muted fs-5 mb-4">PHP is one of my favori- I'm kidding... It's PHP... We're not using it. I didn't even want to include the logo.</p>
                                        <h2 class="fw-bolder mb-4 mt-5">Conclusion</h2>
                                        <p class="text-muted fs-5 mb-4">
                                            F# has been critical to the development of TechMine and has allowed us to achieve our goals much quicker than what would have been possible with other languages. It's also one of the most underrated languages and I hope that it's popularity increases. Please consider using F# in one of your next projects. I hope you enjoyed this post and please consider checking out our
                                            <a href="javascript:;" data-bs-toggle="modal" data-bs-target="#feedbackModal">Beta</a>
                                            which is available now.
                                        </p>
                                    </section>
                                </article>
                            </div>
                        </div>
                    </div>
                </section>
            </main>
        </div>
        <!-- Footer-->
        <footer class="bg-black text-center py-5">
            <div class="container-fluid px-5">
                <div class="row">
                    <div class="col-xl-4">
                        <div class="container px-5"><div class="text-white-50 small mb-1">&copy; TechMine, LLC 2023. All Rights Reserved.</div></div>
                    </div>
                    <div class="col-xl-4">
                        <div class="container px-5 mb-1">
                            <div class="text-white-50 small">
                                <a href="/privacy">Privacy</a>
                                <span class="mx-1">&middot;</span>
                                <a href="/terms">Terms</a>
                                <span class="mx-1">&middot;</span>
                                <a href="/faq">FAQ</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-4">
                        <div class="container px-5">
                            <div class="text-white-50 small">
                                <span class="mx-1 d-lg-inline d-none">follow us on:</span>
                                <a class="mx-1" href="https://www.facebook.com/profile.php?id=100085622987447" target="_blank" aria-label="facebook"><i class="footer-social-icon bi-facebook"></i></a>
                                <a class="mx-1" href="https://twitter.com/TechMineIO" target="_blank" aria-label="twitter"><i class="footer-social-icon bi-twitter"></i></a>
                                <a class="mx-1" href="https://www.youtube.com/channel/UCZgj_JefaCkz1wNoWnpDOuQ" target="_blank" aria-label="youtube"><i class="footer-social-icon bi-youtube"></i></a>
                                <a class="mx-1" href="https://www.linkedin.com/company/techmine-io" target="_blank" aria-label="linkedin"><i class="footer-social-icon bi-linkedin"></i></a>
                                <a class="mx-1" href="https://www.reddit.com/r/TechMine" target="_blank" aria-label="reddit"><i class="footer-social-icon bi-reddit"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
        <!-- Feedback Modal-->
        <div class="modal fade" id="feedbackModal" tabindex="-1" aria-labelledby="feedbackModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header bg-gradient-primary-to-secondary p-4">
                        <h4 class="modal-title font-alt text-white" id="feedbackModalLabel">Sign Up</h4>
                        <button class="btn-close btn-close-white" type="button" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body border-0 p-4">
                        <!-- * * * * * * * * * * * * * * *-->
                        <!-- * * SB Forms Contact Form * *-->
                        <!-- * * * * * * * * * * * * * * *-->
                        <!-- This form is pre-integrated with SB Forms.-->
                        <!-- To make this form functional, sign up at-->
                        <!-- https://startbootstrap.com/solution/contact-forms-->
                        <!-- to get an API token!-->
                        <form class="needs-validation" id="betaForm">
                            <!-- Name input-->
                            <div class="form-floating mb-3">
                                <input class="form-control" id="name" type="text" placeholder="Enter your name..." name="Name" required="true" />
                                <label for="name">Full name</label>
                                <div class="invalid-feedback">A name is required.</div>
                            </div>
                            <!-- Email address input-->
                            <div class="form-floating mb-3">
                                <input class="form-control" id="email" type="email" placeholder="name@example.com" name="Email" required="true" />
                                <label for="email">Email address</label>
                                <div class="invalid-feedback">Email exists or is invalid</div>
                            </div>
                            <!-- Password-->
                            <div class="form-floating mb-3">
                                <input class="form-control" id="password" type="password" placeholder="Password" name="Password" required="true" />
                                <label for="password">Password</label>
                                <div class="invalid-feedback">Password must be at least 6 characters long and contain an uppercase character, lowercase character, a digit, and a symbol</div>
                            </div>
                            <!-- Plan-->
                            <div class="form-floating mb-3 d-none">
                                <select class="form-select" id="plans" aria-label="Default select example" name="Plan" required="true"></select>
                                <label for="plan">Plan</label>
                            </div>
                            <div class="text-center text-muted small mb-3 d-none"><a href="/pricing" target="_blank">Compare Plans</a></div>
                            <!-- Billing Frequency-->
                            <div class="form-floating mb-3 d-none">
                                <select class="form-select" id="plans" aria-label="Default select example" name="Billing" required="true">
                                    <option id="monthlyOpt" value="Monthly">Monthly</option>
                                    <option id="yearlyOpt" value="Yearly" selected="true">Yearly</option>
                                </select>
                                <label for="plan">Billing Frequency</label>
                            </div>
                            <div class="mb-3" id="captcha"></div>
                            <div class="text-muted small mb-3">
                                By selecting "Agree and Begin Free Trial" I agree to the
                                <a href="/terms" target="_blank">TechMine Terms.</a>
                                Learn about how we use and protect your data in our
                                <a href="/privacy" target="_blank">Privacy Policy.</a>
                            </div>
                            <!-- Submit success message-->
                            <!---->
                            <!-- This is what your users will see when the form-->
                            <!-- has successfully submitted-->
                            <div class="d-none" id="betaFormSubmitSuccessMessage">
                                <div class="text-center mb-3"><div class="fw-bolder">Please check your email. Thank you!</div></div>
                            </div>
                            <!-- Submit error message-->
                            <!---->
                            <!-- This is what your users will see when there is-->
                            <!-- an error submitting the form-->
                            <div class="d-none" id="betaFormSubmitErrorMessage"><div class="text-center text-danger mb-3">Error, please review the information and retry</div></div>
                            <!-- Submit Button-->
                            <div class="d-grid"><button class="btn btn-primary rounded-pill btn-lg" id="betaFormSubmitButton" type="submit">Agree and Begin Free Trial</button></div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <script>
            function handleSubmit(id, url, event) {
                event.preventDefault();

                document.getElementById(id + 'SubmitSuccessMessage').classList.add('d-none');
                document.getElementById(id + 'SubmitErrorMessage').classList.add('d-none');
                document.getElementById(id + 'SubmitButton').disabled = true;

                const data = new FormData(event.target);

                const value = Object.fromEntries(data.entries());

                value.topics = data.getAll('topics');

                let xhr = new XMLHttpRequest();
                //let url = "https://app.techmine.io/api/IAuthApi/BetaRegistration";

                // open a connection
                xhr.open('POST', url, true);

                // Set the request header i.e. which type of content you are sending
                xhr.setRequestHeader('Content-Type', 'application/json');

                // Create a state change callback
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4) {
                        // Print received data from server
                        console.log(this.responseText);
                        if (xhr.status === 200 && this.responseText == 'true') {
                            document.getElementById(id + 'SubmitSuccessMessage').classList.remove('d-none');
                            document.getElementById(id + 'SubmitButton').classList.add('d-none');
                        } else if (xhr.status === 200 && this.responseText.length > 5) {
                            let key = this.responseText.substring(1, this.responseText.length - 1);
                            window.location = 'https://app.techmine.io/#/Login' + key;
                        } else {
                            document.getElementById(id + 'SubmitErrorMessage').classList.remove('d-none');
                            document.getElementById(id + 'SubmitButton').disabled = false;
                        }
                    }
                };

                // Converting JSON data to string
                var strData = JSON.stringify([value]);

                // Sending data with the request
                xhr.send(strData);

                //console.log(value);
            }
            const betaForm = document.querySelector('#betaForm');

            function betaFormSubmit(event) {
                event.preventDefault();
                if (betaForm.querySelectorAll('.is-invalid').length == 0) {
                    handleSubmit('betaForm', 'https://app.techmine.io/api/Register', event);
                }
            }

            betaForm.addEventListener('submit', betaFormSubmit);
            let pass = document.getElementById('password');
            pass.addEventListener('blur', function () {
                var re = /^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{6,}$/;
                if (re.test(pass.value)) {
                    pass.classList.remove('is-invalid');
                } else {
                    pass.classList.add('is-invalid');
                }
            });
            let email = document.getElementById('email');
            email.addEventListener('blur', function () {
                let xhr = new XMLHttpRequest();
                //let url = "https://app.techmine.io/api/IAuthApi/BetaRegistration";

                // open a connection
                xhr.open('POST', 'https://app.techmine.io/api/EmailExists', true);

                // Set the request header i.e. which type of content you are sending
                xhr.setRequestHeader('Content-Type', 'application/json');

                // Create a state change callback
                xhr.onreadystatechange = function () {
                    if (xhr.readyState === 4) {
                        // Print received data from server
                        console.log(this.responseText);
                        if (xhr.status === 200 && this.responseText == 'true') {
                            email.classList.add('is-invalid');
                        } else {
                            email.classList.remove('is-invalid');
                        }
                    }
                };

                // Converting JSON data to string
                var strData = JSON.stringify([email.value]);

                // Sending data with the request
                xhr.send(strData);
            });
        </script>
        <script defer src="/js/bootstrap.bundle.min.js"></script>
        <script defer src="/js/gtag.js"></script>
        <script>
            var isContactPage = typeof isContactPage !== 'undefined';
            //console.log(isContactPage);
            function onloadCallback() {
                grecaptcha.render('captcha', { sitekey: '6LdpkwAiAAAAAPM6UHnBXOErGZLKRfYBRguTapA6', theme: 'light' });
                if (isContactPage) {
                    grecaptcha.render('captchaContact', { sitekey: '6LdpkwAiAAAAAPM6UHnBXOErGZLKRfYBRguTapA6', theme: 'light' });
                }
            }
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag('js', new Date());
            gtag('config', 'G-213WP915X0');

            var firstOpen = true;
            function loadCaptcha() {
                firstOpen = false;
                var script = document.createElement('script');
                script.setAttribute('type', 'text/javascript');
                script.async = true;
                script.defer = true;
                script.setAttribute('src', 'https://www.google.com/recaptcha/api.js?onload=onloadCallback&render=explicit');
                document.getElementsByTagName('head')[0].appendChild(script);
            }
            function setModal() {
                var searchParams = new URLSearchParams(window.location.search);

                let plan = searchParams.get('plan');
                let billing = searchParams.get('billing');
                let planOpt = document.getElementById(plan + 'Opt');
                if (planOpt) {
                    planOpt.selected = true;
                }
                let billingOpt = document.getElementById(billing + 'Opt');
                if (billingOpt) {
                    billingOpt.selected = true;
                }
            }

            //- function bootstrapLoaded(){
            //-     // Activate Bootstrap scrollspy on the main nav element
            //-     const mainNav = document.body.querySelector('#mainNav');
            //-     if (mainNav) {
            //-         new bootstrap.ScrollSpy(document.body, {
            //-             target: '#mainNav',
            //-             offset: 74,
            //-         });
            //-     };
            //- }

            document.getElementById('feedbackModal').addEventListener('shown.bs.modal', function () {
                if (firstOpen) {
                    loadCaptcha();
                    fetch('https://app.techmine.io/api/Offers')
                        .then((response) => response.json())
                        .then((data) => {
                            let offers = data.sort(function (a, b) {
                                return a.DisplayOrder > b.DisplayOrder ? 1 : -1;
                            });
                            let plans = document.getElementById('plans');
                            plans.innerHTML = '';
                            for (var i = 0; i < offers.length; i++) {
                                let offer = offers[i];
                                if (!offer.ContactRequired) plans.innerHTML += '<option id="' + offer.Name + 'Opt" ' + (offer.Highlighted ? 'selected' : '') + ' value="' + offer.Id + '">' + offer.Name + '</option>';
                            }
                            setModal();
                        });
                } else {
                    setModal();
                }
            });
            window.addEventListener('DOMContentLoaded', (event) => {
                var searchParams = new URLSearchParams(window.location.search);
                let action = searchParams.get('action');
                if (action == 'SignUp') {
                    console.log('Show modal');
                    new bootstrap.Modal(document.getElementById('feedbackModal')).show();
                }

                var lazyBackgrounds = [].slice.call(document.querySelectorAll('.lazy-background'));
                if ('IntersectionObserver' in window) {
                    let lazyBackgroundObserver = new IntersectionObserver(function (entries, observer) {
                        entries.forEach(function (entry) {
                            if (entry.isIntersecting) {
                                entry.target.classList.add('visible');
                                lazyBackgroundObserver.unobserve(entry.target);
                            }
                        });
                    });

                    lazyBackgrounds.forEach(function (lazyBackground) {
                        lazyBackgroundObserver.observe(lazyBackground);
                    });
                }

                if (isContactPage) {
                    loadCaptcha();
                }

                // Collapse responsive navbar when toggler is visible
                const navbarToggler = document.body.querySelector('.navbar-toggler');
                const responsiveNavItems = [].slice.call(document.querySelectorAll('#navbarResponsive .nav-link'));
                responsiveNavItems.map(function (responsiveNavItem) {
                    responsiveNavItem.addEventListener('click', () => {
                        if (window.getComputedStyle(navbarToggler).display !== 'none') {
                            navbarToggler.click();
                        }
                    });
                });

                // Activate Bootstrap scrollspy on the main nav element
                const mainNav = document.body.querySelector('#mainNav');
                if (mainNav) {
                    new bootstrap.ScrollSpy(document.body, {
                        target: '#mainNav',
                        offset: 74,
                    });
                }
            });
        </script>
    </body>
</html>
